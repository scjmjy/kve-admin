import { ObjectId } from "bson";
import {
    DEPARTMENT_CONTAINER_ID,
    IDepartment,
    IPermission,
    IRole,
    IUser,
    PERMISSION_CONTAINER_ID,
    ROLE_SUPERADMIN_ID,
    USER_SUPERADMIN_ID,
} from "admin-common";

interface InternalRole extends Omit<IRole, "_id" | "status" | "createdAt" | "updatedAt"> {
    _id?: ObjectId;
}

interface InternalDepartment
    extends Omit<IDepartment, "_id" | "depts" | "roles" | "status" | "createdAt" | "updatedAt"> {
    _id?: ObjectId;
    depts: InternalDepartment[];
    roles: InternalRole[];
}

const _id_dept_container = new ObjectId(DEPARTMENT_CONTAINER_ID);
const _id_role_superadmin = new ObjectId(ROLE_SUPERADMIN_ID);

export const internalDepts: InternalDepartment[] = [
    {
        _id: _id_dept_container,
        name: "总公司",
        description: "总公司节点。",
        roles: [
            {
                _id: _id_role_superadmin,
                name: "超级管理员",
                perms: [],
                description: "拥有系统所有权限。",
            },
            {
                name: "管理员",
                perms: [],
                description: "拥有系统大部分权限。",
            },
            {
                name: "用户",
                perms: [],
                description: "总公司直属普通用户角色。",
            },
        ],
        depts: [
            {
                name: "上海部门",
                description: "上海部门节点。",
                roles: [
                    {
                        name: "上海部门总经理",
                        perms: [],
                        description: "由上海部门总经理持有。",
                    },
                ],
                depts: [
                    {
                        name: "上海浦东地区",
                        description: "上海浦东子部门节点。",
                        roles: [
                            {
                                name: "上海浦东地区总经理",
                                perms: [],
                                description: "由上海浦东地区总经理持有。",
                            },
                        ],
                        depts: [],
                    },
                    {
                        name: "上海徐汇地区",
                        description: "上海徐汇地区节点。",
                        roles: [
                            {
                                name: "上海徐汇地区总经理",
                                perms: [],
                                description: "由上海徐汇地区总经理持有。",
                            },
                        ],
                        depts: [],
                    },
                ],
            },
            {
                name: "香港部门",
                description: "香港部门节点。",
                roles: [
                    {
                        name: "香港部门总经理",
                        perms: [],
                        description: "由香港部门总经理持有。",
                    },
                ],
                depts: [
                    {
                        name: "香港湾仔区",
                        description: "香港湾仔区部门节点。",
                        roles: [
                            {
                                name: "香港湾仔区总经理",
                                perms: [],
                                description: "由香港湾仔区总经理持有。",
                            },
                        ],
                        depts: [],
                    },
                    {
                        name: "香港黄大仙区",
                        description: "香港黄大仙区节点。",
                        roles: [
                            {
                                name: "香港黄大仙区总经理",
                                perms: [],
                                description: "由香港黄大仙区总经理持有。",
                            },
                        ],
                        depts: [],
                    },
                ],
            },
        ],
    },
];

interface InternalUser
    extends Omit<IUser, "_id" | "avatar" | "thumbnail" | "roles" | "depts" | "status" | "createdAt" | "updatedAt"> {
    _id?: ObjectId;
    roles: ObjectId[];
    depts: ObjectId[];
}

const _id_user_superadmin = new ObjectId(USER_SUPERADMIN_ID);

export const internalUsers: InternalUser[] = [
    {
        _id: _id_user_superadmin,
        username: "superadmin",
        realname: "超级管理员",
        password: "123456",
        email: "",
        mobileno: "",
        gender: "UNKNOWN",
        depts: [_id_dept_container],
        roles: [_id_role_superadmin],
    },
    {
        username: "admin01",
        realname: "管理员01",
        password: "123456",
        email: "",
        mobileno: "",
        gender: "UNKNOWN",
        depts: [_id_dept_container],
        roles: [],
    },
    {
        username: "admin02",
        realname: "管理员02",
        password: "123456",
        email: "",
        mobileno: "",
        gender: "UNKNOWN",
        depts: [_id_dept_container],
        roles: [],
    },
    {
        username: "user01",
        realname: "用户01",
        password: "123456",
        email: "",
        mobileno: "",
        gender: "UNKNOWN",
        depts: [_id_dept_container],
        roles: [],
    },
    {
        username: "user02",
        realname: "用户02",
        password: "123456",
        email: "",
        mobileno: "",
        gender: "UNKNOWN",
        depts: [_id_dept_container],
        roles: [],
    },
];

interface InternalPerm extends Omit<IPermission, "createdAt" | "updatedAt" | "status" | "_id" | "children"> {
    _id?: ObjectId;
    children: InternalPerm[];
}

const _id_perm_contianer = new ObjectId(PERMISSION_CONTAINER_ID);

export const internalPerms: InternalPerm[] = [
    {
        _id: _id_perm_contianer,
        title: "根节点",
        code: "/",
        type: "menugroup",
        description: "权限根节点",
        children: [
            {
                code: "/dashboard",
                title: "仪表盘",
                type: "menugroup",
                path: "/",
                layout: "DefaultLayout",
                pinned: false,
                pathKey: "fullPath",
                description: "仪表盘页面组",
                children: [
                    {
                        name: "Introduction",
                        code: "/dashboard/intro",
                        type: "menuitem",
                        path: "",
                        component: "Introduction",
                        children: [],
                        title: "项目介绍",
                        pinned: true,
                        cacheable: false,
                        footer: true,
                        pathKey: "fullPath",
                        icon: "BrushFilled",
                        description: "项目介绍",
                    },
                    {
                        name: "DashboardIndex",
                        code: "/dashboard/index1",
                        type: "menuitem",
                        path: "index1",
                        component: "DashboardIndex",
                        children: [],
                        title: "首页1-AMap",
                        pinned: true,
                        cacheable: false,
                        footer: false,
                        pathKey: "fullPath",
                        icon: "BrushFilled",
                        description: "首页Demo1-EchartsAMap",
                    },
                    {
                        name: "DashboardIndex2",
                        code: "/dashboard/index2",
                        type: "menuitem",
                        path: "index2",
                        component: "DashboardIndex2",
                        children: [],
                        title: "首页2-Geo",
                        pinned: true,
                        cacheable: false,
                        footer: false,
                        pathKey: "fullPath",
                        icon: "CircleCheckFilled",
                        description: "首页Demo2-EchartsGeoMap",
                    },
                    {
                        name: "DashboardIndex3",
                        code: "/dashboard/index3",
                        type: "menuitem",
                        path: "index3",
                        component: "DashboardIndex3",
                        children: [],
                        title: "首页3-AMapBuslines",
                        pinned: true,
                        cacheable: false,
                        footer: false,
                        pathKey: "fullPath",
                        icon: "CircleCheckTrendChartsilled",
                        description: "首页Demo3-AMapBuslines",
                    },
                ],
            },
            {
                title: "嵌套页面",
                code: "/demo/nestedpage",
                type: "menugroup",
                path: "/demo/nestedpage",
                layout: "DefaultLayout",
                pinned: false,
                cacheable: true,
                pathKey: "fullPath",
                description: "嵌套页面 Demo",
                children: [
                    {
                        name: "page1",
                        code: "/demo/nestedpage/page1",
                        type: "menuitem",
                        path: "page1",
                        component: "page1",
                        children: [],
                        title: "第一层1",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        icon: "AlarmClock",
                        description: "第一层页面 page1",
                    },
                    {
                        name: "page2",
                        code: "/demo/nestedpage/page2",
                        type: "menuitem",
                        path: "page2",
                        component: "page2",
                        children: [],
                        title: "第一层2",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        icon: "icon-role",
                        description: "第一层页面 page2",
                    },
                    {
                        name: "detail1",
                        code: "/demo/nestedpage/page1/detail",
                        type: "menuitem",
                        path: "/detail1",
                        component: "detail1",
                        children: [],
                        title: "第一层1详情",
                        pinned: false,
                        cacheable: true,
                        visible: false,
                        forName: "page1",
                        pathKey: "fullPath",
                        description: "第一层页面 page1 的详情页",
                    },
                    {
                        code: "/demo/nestedpage2",
                        type: "menugroup",
                        path: "nestedpage",
                        layout: "DefaultLayout",
                        title: "页面组",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        icon: "Menu",
                        description: "第二层页面组",
                        children: [
                            {
                                name: "NestedPage1",
                                code: "/demo/nestedpage2/page1",
                                type: "menuitem",
                                path: "page1",
                                component: "NestedPage1",
                                children: [],
                                title: "第二层1",
                                pinned: false,
                                cacheable: true,
                                pathKey: "fullPath",
                                icon: "Bicycle",
                                description: "第二层页面 page1",
                            },
                            {
                                name: "NestedPage2",
                                code: "/demo/nestedpage2/page2",
                                type: "menuitem",
                                path: "page2",
                                component: "NestedPage2",
                                children: [],
                                title: "第二层2",
                                pinned: false,
                                cacheable: true,
                                pathKey: "fullPath",
                                icon: "icon-edge",
                                description: "第二层页面 page2",
                            },
                            {
                                code: "/demo/nestedpage3",
                                type: "menugroup",
                                path: "nestedpage",
                                layout: "DefaultLayout",
                                title: "页面组",
                                pinned: false,
                                cacheable: true,
                                pathKey: "fullPath",
                                icon: "Apple",
                                description: "第三层页面组",
                                children: [
                                    {
                                        name: "ThirdNestedPage1",
                                        code: "/demo/nestedpage3/page1",
                                        type: "menuitem",
                                        path: "page1",
                                        component: "ThirdNestedPage1",
                                        children: [],
                                        title: "第三层1",
                                        pinned: false,
                                        cacheable: true,
                                        pathKey: "fullPath",
                                        icon: "BellFilled",
                                        description: "第三层页面 page1",
                                    },
                                    {
                                        name: "ThirdNestedPage2",
                                        code: "/demo/nestedpage3/page2",
                                        type: "menuitem",
                                        path: "page2",
                                        layout: "DefaultLayout",
                                        component: "ThirdNestedPage2",
                                        children: [],
                                        title: "第三层2",
                                        pinned: false,
                                        cacheable: true,
                                        pathKey: "fullPath",
                                        icon: "Box",
                                        description: "第三层页面 page2",
                                    },
                                    {
                                        name: "ThirdNestedPageDetail1",
                                        code: "/demo/nestedpage3/page1/detail",
                                        type: "menuitem",
                                        path: "detail1/:id",
                                        component: "ThirdNestedPageDetail1",
                                        children: [],
                                        title: "第三层1详情",
                                        pinned: false,
                                        cacheable: true,
                                        visible: false,
                                        forName: "ThirdNestedPage1",
                                        pathKey: "fullPath",
                                        description: "第三层页面 page1 的详情页",
                                    },
                                    {
                                        code: "/demo/nestedpage4",
                                        type: "menugroup",
                                        path: "nestedpage",
                                        layout: "DefaultLayout",
                                        title: "页面组",
                                        icon: "BellFilled",
                                        pinned: false,
                                        cacheable: true,
                                        pathKey: "fullPath",
                                        description: "第四层页面组",
                                        children: [
                                            {
                                                name: "FourthNestedPage1",
                                                code: "/demo/nestedpage4/page1",
                                                type: "menuitem",
                                                path: "page1",
                                                component: "FourthNestedPage1",
                                                children: [],
                                                title: "第四层1",
                                                icon: "Aim",
                                                pinned: false,
                                                cacheable: true,
                                                pathKey: "fullPath",
                                                description: "第四层页面 page1",
                                            },
                                            {
                                                name: "FourthNestedPage2",
                                                code: "/demo/nestedpage4/page2",
                                                type: "menuitem",
                                                path: "page2",
                                                component: "FourthNestedPage2",
                                                children: [],
                                                title: "第四层2",
                                                icon: "Baseball",
                                                pinned: false,
                                                cacheable: true,
                                                pathKey: "fullPath",
                                                description: "第四层页面 page2",
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            {
                code: "/demo/comfunc",
                type: "menugroup",
                path: "/demo/com-func",
                layout: "DefaultLayout",
                title: "组件和功能",
                pinned: false,
                cacheable: true,
                pathKey: "fullPath",
                description: "组件和功能 Demo",
                children: [
                    {
                        code: "/demo/com-func/crud",
                        type: "menugroup",
                        path: "crud",
                        layout: "DefaultLayout",
                        title: "增删改查",
                        icon: "DeleteFilled",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "低代码增删改查组件 Demo",
                        children: [
                            {
                                name: "CrudFormDemo",
                                code: "/demo/comfunc/crudform",
                                type: "menuitem",
                                path: "crudform",
                                component: "CrudFormDemo",
                                children: [],
                                title: "CrudForm",
                                pinned: false,
                                cacheable: true,
                                pathKey: "fullPath",
                                icon: "ChatLineSquare",
                                description: "CrudForm 使用示例",
                            },
                            {
                                name: "CrudFormDlgDemo",
                                code: "/demo/comfunc/crudformdlg",
                                type: "menuitem",
                                path: "crudformdlg",
                                component: "CrudFormDlgDemo",
                                children: [],
                                title: "CrudFormDlg",
                                icon: "Briefcase",
                                pinned: false,
                                cacheable: true,
                                pathKey: "fullPath",
                                description: "CrudFormDlg 使用示例",
                            },
                            {
                                name: "CrudTableDemo",
                                code: "/demo/comfunc/crudtable",
                                type: "menuitem",
                                path: "crudtable",
                                component: "CrudTableDemo",
                                children: [],
                                title: "CrudTable",
                                icon: "Document",
                                pinned: false,
                                cacheable: true,
                                pathKey: "fullPath",
                                description: "CrudTable 使用示例",
                            },
                        ],
                    },
                    {
                        name: "PermissionDemo",
                        code: "/demo/comfunc/permission",
                        type: "menuitem",
                        path: "permission",
                        component: "PermissionDemo",
                        children: [],
                        title: "权限",
                        icon: "Grid",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "Permission 使用示例",
                    },
                ],
            },
            {
                code: "/system",
                type: "menugroup",
                path: "/system",
                layout: "DefaultLayout",
                title: "系统管理",
                pinned: false,
                cacheable: true,
                pathKey: "fullPath",
                description: "系统管理",
                children: [
                    {
                        name: "UserManage",
                        code: "/system/usermanage",
                        type: "menuitem",
                        path: "user",
                        component: "UserManage",
                        children: [],
                        title: "部门/角色/用户",
                        icon: "icon-role",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "部门、角色、权限、用户管理。",
                    },
                    {
                        name: "MenuManage",
                        code: "/system/menumanage",
                        type: "menuitem",
                        path: "menu",
                        component: "MenuManage",
                        children: [],
                        title: "权限菜单",
                        icon: "Menu",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "菜单和权限管理。",
                    },
                ],
            },
            {
                code: "/monitor",
                type: "menugroup",
                path: "/monitor",
                layout: "DefaultLayout",
                title: "服务监控",
                pinned: false,
                cacheable: true,
                pathKey: "fullPath",
                description: "服务监控",
                children: [
                    {
                        name: "CacheManage",
                        code: "/monitor/cachemanage",
                        type: "menuitem",
                        path: "cache",
                        component: "CacheManage",
                        children: [
                            {
                                code: "/monitor/onlineusers/clear",
                                type: "action",
                                children: [],
                                title: "清空缓存",
                                description: "清空缓存",
                            },
                        ],
                        title: "缓存管理",
                        icon: "Coin",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "Redis 缓存管理",
                    },
                    {
                        name: "OnlineUsers",
                        code: "/monitor/onlineusers",
                        type: "menuitem",
                        path: "online",
                        component: "OnlineUsers",
                        children: [
                            {
                                code: "/monitor/onlineusers/forceLogout",
                                type: "action",
                                children: [],
                                title: "强退用户",
                                description: "删除会话",
                            },
                            {
                                code: "/monitor/onlineusers/banIP",
                                type: "action",
                                children: [],
                                title: "禁止IP",
                                description: "删除会话并将指定的IP拉入黑名单",
                            },
                            {
                                code: "/monitor/onlineusers/banUser",
                                type: "action",
                                children: [],
                                title: "禁止用户",
                                description: "删除会话并将指定的用户拉入黑名单",
                            },
                        ],
                        title: "在线用户",
                        icon: "UserFilled",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "在线用户管理",
                    },
                    {
                        name: "LogManage",
                        code: "/monitor/logmanage",
                        type: "menuitem",
                        path: "log",
                        component: "LogManage",
                        title: "日志管理",
                        icon: "Calendar",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "日志管理",
                        children: [
                            {
                                code: "/monitor/log/clear/access",
                                type: "action",
                                children: [],
                                title: "清空访问日志",
                                description: "清空访问日志",
                            },
                            {
                                code: "/monitor/log/clear/operation",
                                type: "action",
                                children: [],
                                title: "清空操作日志",
                                description: "清空操作日志",
                            },
                            {
                                code: "/monitor/log/clear/debug",
                                type: "action",
                                children: [],
                                title: "清空调试日志",
                                description: "清空调试日志",
                            },
                        ],
                    },
                ],
            },
            {
                code: "/external",
                type: "menugroup",
                layout: "DefaultLayout",
                title: "外链",
                pinned: false,
                cacheable: true,
                pathKey: "fullPath",
                path: "/external",
                description: "外链 Demo",
                children: [
                    {
                        name: "ExternalLink",
                        code: "/external/baidu",
                        type: "menuitem",
                        path: "https://www.baidu.com",
                        component: "ExternalLink",
                        children: [],
                        title: "百度",
                        icon: "icon-baidu",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "外链：百度",
                    },
                    {
                        name: "ExternalLinkIframe",
                        code: "/external/edge",
                        type: "menuitem",
                        path: "edge",
                        component: "ExternalLinkIframe",
                        children: [],
                        title: "Edge(内嵌)",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        iframe: "https://www.bing.com",
                        icon: "icon-edge",
                        description: "内嵌外链：Edge",
                    },
                ],
            },
            {
                code: "/hidemenu",
                type: "menugroup",
                layout: "DefaultLayout",
                title: "隐藏菜单",
                pinned: false,
                cacheable: true,
                visible: false,
                pathKey: "fullPath",
                description: "存放系统隐藏页面",
                children: [
                    {
                        name: "UserProfile",
                        code: "/hidemenu/userprofile",
                        type: "menuitem",
                        path: "user/profile",
                        component: "UserProfile",
                        children: [],
                        title: "个人资料",
                        pinned: false,
                        cacheable: true,
                        pathKey: "fullPath",
                        description: "个人资料页面",
                    },
                ],
            },
        ],
    },
];
